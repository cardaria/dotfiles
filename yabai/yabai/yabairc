# for this to work you must configure sudo such that
# it will be able to run the command without password

yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

# .. more yabai startup stuff
yabai -m config layout bsp

# label spaces
yabai -m space 1 --label general
yabai -m space 2 --label todos
yabai -m space 3 --label media
yabai -m space 4 --label misc

# Set all padding and gaps to 20pt (default: 0)
yabai -m config top_padding    10
yabai -m config bottom_padding 10
yabai -m config left_padding   10
yabai -m config right_padding  10
yabai -m config window_gap     10

# on or off (default: off)
yabai -m config auto_balance on

# yabai -m config focus_follows_mouse autoraise

# window opacity (default: off)
# example: render all unfocused windows with 90% opacity
yabai -m config window_opacity on
yabai -m config active_window_opacity 1.0
yabai -m config normal_window_opacity 0.85

# yabai -m config window_animation_duration 0.2

yabai -m rule --add app="^Brave Browser$" space=^general
yabai -m rule --add app="^Alacritty$" space=^general
yabai -m rule --add app="^ChatGPT$" space=^general
yabai -m rule --add app="^RemNote$" space=^general
yabai -m rule --add app="^Obsidian$" space=^general
yabai -m rule --add app="^Mail$" space=^todos
yabai -m rule --add app="^Calendar$" space=^todos
yabai -m rule --add app="^Reminders$" space=^todos
yabai -m rule --add app="^Discord$" space=^media
yabai -m rule --add app="^Spotify$" space=^media
yabai -m rule --add app="^NVIDIA GeForce NOW$" space=^misc
yabai -m rule --add app="^League Of Legends$" space=^misc

# yabai -m config external_bar all:24:0

# float system preferences
yabai -m rule --add app="^System Settings$" manage=off
yabai -m rule --add app="^1Password$" manage=off
yabai -m rule --add app="^Finder$" manage=off
yabai -m rule --add app="^League of Legends$" manage=off
yabai -m rule --add app="^Keyboard Maestro$" manage=off



# Trigger the script when a window is created
yabai -m signal --add event=window_created action="/Users/cardaria/dotfiles/yabai/yabai/scripts/auto_padding.sh"

# Trigger the script when a window is destroyed
yabai -m signal --add event=window_destroyed action="/Users/cardaria/dotfiles/yabai/yabai/scripts/auto_padding.sh"

# Trigger the script when a window is minimized
yabai -m signal --add event=window_minimized action="/Users/cardaria/dotfiles/yabai/yabai/scripts/auto_padding.sh"

# Trigger the script when a window is restored (deminimized)
yabai -m signal --add event=window_deminimized action="/Users/cardaria/dotfiles/yabai/yabai/scripts/auto_padding.sh"

# Trigger the script when an application is hidden
yabai -m signal --add event=application_hidden action="/Users/cardaria/dotfiles/yabai/yabai/scripts/auto_padding.sh"

# Trigger the script when an application becomes visible
yabai -m signal --add event=application_visible action="/Users/cardaria/dotfiles/yabai/yabai/scripts/auto_padding.sh"

# Trigger the script when space changed
yabai -m signal --add event=space_changed action="/Users/cardaria/dotfiles/yabai/yabai/scripts/auto_padding.sh"

# Focus window under mouse when app closed or destroyed
yabai -m signal --add event=window_destroyed action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"
yabai -m signal --add event=application_terminated action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"
